# 프로젝트: AI 법원 경매 사업계획서

> 이 파일은 Claude가 이 프로젝트에서 따라야 할 행동 규칙입니다.
> "프로젝트 시작", "계속 진행", "사업계획서 진행" 명령 시 이 규칙을 적용합니다.

---

## 🚨 핵심 규칙 (절대 준수)

| 규칙 | 설명 |
|------|------|
| **Claude는 직접 작성 금지** | 사업계획서 내용은 반드시 ChatGPT를 통해 작성 |
| **Claude의 역할** | 프롬프트 생성 → 출력 → 사용자가 ChatGPT에 전달 → 응답 받아 파일 저장 |
| **ChatGPT Tab 구분** | Tab1: 심층 리서치, Tab2: 일반 질문/작성/평가 |
| **질문 금지** | "어떻게 진행할까요?" 등 확인 질문 없이 바로 프롬프트 출력 |

### VS Code 확장 실행 흐름 (Shell 아님)

```
1. Claude가 state.json 읽고 다음 작업 판단
2. ChatGPT용 프롬프트를 코드블록으로 출력
3. 사용자가 ChatGPT에 붙여넣기
4. 사용자가 ChatGPT 응답을 Claude에게 전달 (붙여넣기 or 파일경로)
5. Claude가 drafts/ 폴더에 저장 + state.json 업데이트
6. 다음 섹션으로 자동 진행
```

### 금지 사항 ❌
- "어떤 방식으로 진행할까요?" 등 선택지 질문
- "ChatGPT를 조작할 수 없습니다" 등 변명
- 사용자에게 방법을 물어보는 행위

---

## 1. 자동 실행 규칙

### 트리거 명령어
- "프로젝트 시작", "계속 진행", "사업계획서 진행", "계속해" 등

### 시작 시 행동 (질문 없이 바로 실행)
1. `state.json` 읽기
2. 다음 작업할 섹션 자동 판단
3. **바로 ChatGPT 프롬프트 출력** (확인 질문 없음)

### 프롬프트 출력 형식
```
📋 [ChatGPT Tab2에 붙여넣기] - {섹션명}

\`\`\`
{프롬프트 내용}
\`\`\`

ChatGPT 응답을 붙여넣거나 "응답 완료" 알려주세요.
```

---

## 2. 섹션 처리 순서

```
FOR 각 섹션 IN state.json.sections:

    STEP 1: 전처리 체크
    ├── needs_research=true AND 미완료?
    │   → ChatGPT 리서치 시작 → 🔬 알림 → 다음 섹션 진행
    │
    └── needs_human=true?
        → ChatGPT에 질문+예시 요청 → 예시로 초안 작성 → ✏️ 알림 → 다음 섹션 진행

    STEP 2: 초안 작성
    ├── ChatGPT에 작성 요청
    ├── 응답에서 "사용자 입력 필요 항목" 추출
    └── inputs/{섹션}_questions.md 저장

    STEP 3: 평가 루프 (자동 반복)
    ├── 평가 요청 → 점수/피드백 저장
    ├── score >= 95? → ✅ 완료 알림 → 다음 섹션
    ├── iteration >= 10? → ⚠️ 경고 알림 → 다음 섹션
    └── 그 외? → 피드백 반영 재작성 → 반복
```

---

## 3. 평가 루프 규칙

| 항목 | 값 |
|------|-----|
| 목표 점수 | 95점 |
| 최대 반복 | 10회 |
| 중간 확인 | ❌ 없음 |
| 자동 진행 | ✅ 예 |

### 루프 동작
```
WHILE iteration < 10 AND score < 95:
    1. 현재 버전 평가
    2. scores/{섹션}_feedback_v{n}.txt 저장
    3. state.json 업데이트
    4. IF score >= 95: BREAK with ✅
    5. IF iteration >= 10: BREAK with ⚠️
    6. 피드백 반영 재작성
    7. drafts/{섹션}_v{n+1}.md 저장
    8. iteration++
```

### 출력 형식 (루프 중)
```
🔄 s1_3 평가 루프 (3/10) - 현재 82점
   → 피드백 반영 재작성 중...
```

---

## 4. 알림 규칙 (MUST OUTPUT)

### 🔬 리서치 시작
**조건:** `needs_research=true` AND 리서치 미완료

**동작:**
1. ChatGPT Tab1에 리서치 프롬프트 자동 전송
2. 상태를 `researching`으로 변경
3. 알림 출력
4. **다음 섹션으로 진행** (대기 없음)

**출력:**
```
🔬 [리서치 진행 중] {섹션명}

ChatGPT 심층 리서치가 시작되었습니다.
완료 후 PDF로 저장하고 알려주세요.

예시: "리서치 완료, research/{research_type}.pdf"
```

**후속:** 다음 섹션 작업 진행 (리서치는 백그라운드로 진행)

---

### 🔬 리서치 완료 처리
**조건:** 사용자가 "리서치 완료, {파일경로}" 알림

**동작:**
1. `research_files.{type}`에 파일 경로 저장
2. `research_completed`에 타입 추가
3. 상태를 `research_done`으로 변경
4. 해당 섹션 순서가 되면 PDF 읽고 작성

**사용자 명령 예시:**
```
리서치 완료, research/competitive.pdf
리서치 완료, research/customer_needs.pdf
```

---

### ✏️ 사용자 입력 필요
**조건:** `needs_human=true`

**동작:**
1. ChatGPT에 질문+예시 요청
2. 질문 파일 저장 (`inputs/section_{섹션}_questions.md`)
3. 예시로 초안 작성 + 평가 루프 진행
4. 상태를 `human_input_needed`로 변경
5. 알림 출력
6. **다음 섹션으로 진행** (대기 없음)

**출력:**
```
✏️ [입력 필요] {섹션명}

예시 데이터로 초안이 작성되었습니다.
질문 파일: inputs/section_{섹션}_questions.md

답변 작성 후 알려주세요.
예시: "입력 완료, inputs/{섹션}_input.md"
```

**후속:** 다음 섹션 작업 진행 (예시로 평가 루프 계속)

---

### ✏️ 사용자 입력 완료 처리
**조건:** 사용자가 "입력 완료, {파일경로}" 알림

**동작:**
1. `human_input_files.{섹션}`에 파일 경로 저장
2. 상태를 `human_input_done`으로 변경
3. 해당 섹션 순서가 되면 사용자 입력 반영하여 재작성

**사용자 명령 예시:**
```
입력 완료, inputs/s1_1_input.md
입력 완료, inputs/closure_details_input.md
```

---

### ✅ 섹션 완료
**조건:** score >= 95

**출력:**
```
✅ [완료] {섹션명} - {점수}점 (반복 {n}회)

다음 섹션: {다음섹션명} 진행 중...
```

**후속:** 자동으로 다음 섹션 진행

---

### ⚠️ 최대 반복 도달
**조건:** iteration >= 10 AND score < 95

**출력:**
```
⚠️ [검토 필요] {섹션명} - {점수}점 (최대 반복 도달)

수동 검토가 필요합니다.
파일: drafts/{섹션}_v{n}.md
피드백: scores/{섹션}_feedback_v{n}.txt

검토 후 "계속 진행" 알려주세요.
```

**후속:** 사용자가 "계속 진행" 알릴 때까지 대기

---

## 5. 질문 추출 규칙

### ChatGPT 초안 작성 시
프롬프트에 다음 추가:
```
[추가 요청]
위 섹션을 작성하면서, "사용자만 알 수 있는 정보"가 필요한 부분이 있으면
아래 형식으로 별도 출력해주세요:

USER_INPUT_NEEDED:
- Q1: {질문}
  예시: {성공 사업계획서 예시 답변}
- Q2: {질문}
  예시: {성공 사업계획서 예시 답변}
```

### 응답 처리
1. `USER_INPUT_NEEDED` 섹션 파싱
2. `inputs/{섹션}_input.md` 파일 생성/업데이트
3. ✏️ 알림 출력
4. 사용자 입력 대기

---

## 6. 사용자 명령어 처리

| 사용자 입력 | Claude 행동 |
|-------------|-------------|
| "프로젝트 시작" / "계속 진행" | state.json 확인 → 자동 작업 시작 |
| "리서치 완료, {파일경로}" | research_files에 경로 저장 → 상태 research_done → 해당 섹션 순서 대기 |
| "입력 완료, {파일경로}" | human_input_files에 경로 저장 → 상태 human_input_done → 해당 섹션 순서 대기 |
| "현재 상태" | 전체 섹션 진행률 표 출력 |
| "{섹션} 다시" | 해당 섹션 iteration 리셋 → 재시작 |

**명령어 예시:**
```
리서치 완료, research/competitive.pdf
리서치 완료, research/customer_needs.pdf
입력 완료, inputs/s1_1_input.md
입력 완료, inputs/closure_details_input.md
```

---

## 7. 파일 버전 관리

### 초안/수정본
```
drafts/{섹션}_v1.md  ← 초안
drafts/{섹션}_v2.md  ← 1차 수정
drafts/{섹션}_v3.md  ← 2차 수정
...
```

### 피드백
```
scores/{섹션}_feedback_v1.txt
scores/{섹션}_feedback_v2.txt
...
```

### state.json 업데이트
매 iteration 후:
- `iteration` 증가
- `score` 업데이트
- `state` 변경 (drafted → verified 등)

---

## 8. 섹션별 필요 정보

| 섹션 | needs_research | needs_human | 비고 |
|------|----------------|-------------|------|
| overview | - | - | |
| product_summary | - | - | |
| closure_details | - | ✅ | 폐업 기업 실제 정보 |
| s1_1 | - | ✅ | 폐업 원인 실제 경험 |
| s1_2 | - | - | ✅ 완료 (88점) |
| s1_3 | ✅ 완료 | - | 📝 drafted |
| s2_1 | - | - | |
| s2_2 | - | - | |
| s3_1 | ✅ 필요 | - | competitive 리서치 |
| s3_2 | ✅ 필요 | - | customer_needs 리서치 |
| s3_3 | - | - | |
| s4_1 | - | ✅ | 대표자/팀 실제 정보 |
| s4_2 | - | - | |

---

## 9. 체크리스트 (Claude 자가 점검)

작업 전:
- [ ] state.json 읽었는가?
- [ ] 다음 작업할 섹션 확인했는가?
- [ ] 불필요한 질문 없이 바로 시작하는가?

알림 시:
- [ ] 🔬/✏️/✅/⚠️ 이모지 사용했는가?
- [ ] 필요한 파일 경로 명시했는가?
- [ ] 사용자가 해야 할 행동 명시했는가?

평가 루프:
- [ ] 중간 확인 없이 자동 반복하는가?
- [ ] 매 iteration마다 파일 저장하는가?
- [ ] state.json 업데이트하는가?
